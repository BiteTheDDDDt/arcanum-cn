{
	"module": "martial",
	"author": "dfirestorm",
	"data": {
		"skills": [
			{
				"id": "weaponlore",
				"name": "武技",
				"desc": "将武器技艺融入你的魔法。",
				"need": "armssource",
				"buy": {
					"vigor": 5
				},
				"run": {
					"stamina": 0.6,
					"vigor": 0.12
				},
				"mod": {
					"physdmg": 1,
					"bluntdmg": 0.4,
					"piercedmg": 0.4,
					"slashdmg": 0.4
				}
			}
		],
		"events": [],
		"rares": [],
		"furniture": [],
		"upgrades": [
			{
				"id": "weapon_care",
				"name": "武器保养",
				"require": "g.weaponlore>=2&&g.player.getWeapon().damage>=8",
				"desc": "清洁并保养你的武器。",
				"need": "armssource",
				"max": 3,
				"cost": {
					"research": "200+g.weapon_care*200",
					"water": 4
				},
				"mod": {
					"weaponlore.max": 0.5,
					"weaponlore.rate": 0.1,
					"player.tohit": 0.1
				},
				"flavor": "照顾好武器，它也会照顾你。",
				"group": "martial"
			},
			{
				"id": "weapon_attune",
				"name": "武器契合",
				"require": "g.weaponlore>=6&&g.spiritlore>=8",
				"desc": "与武器建立连接。",
				"max": 1,
				"cost": {
					"research": 1000,
					"mana": 10
				},
				"mod": {
					"weaponlore.max": 1,
					"weaponlore.rate": 0.2,
					"player.tohit": 0.3
				},
				"flavor": "投入时间以获得更佳效果",
				"group": "martial"
			},
			{
				"id": "spec_blunt",
				"name": "钝器专精",
				"tags": "t_martial_spec",
				"desc": "专精于锤类与棍类等钝器。",
				"require": "g.arms_tome>0&&g.tier2>0",
				"warn": true,
				"lock": [
					"t_martial_spec"
				],
				"cost": {
					"gold": 1000,
					"vigor": 10
				},
				"mod": {
					"bluntdmg": 5,
					"player.defense": 5
				},
				"group": "martial"
			},
			{
				"id": "spec_pierce",
				"name": "穿刺专精",
				"tags": "t_martial_spec",
				"desc": "专精于长矛与匕首等穿刺武器。",
				"require": "g.arms_tome>0&&g.tier2>0",
				"warn": true,
				"lock": [
					"t_martial_spec"
				],
				"cost": {
					"gold": 1000,
					"vigor": 10
				},
				"mod": {
					"piercedmg": 5,
					"player.tohit": 1
				},
				"group": "martial"
			},
			{
				"id": "spec_slash",
				"name": "斩击专精",
				"tags": "t_martial_spec",
				"desc": "专精于剑斧等斩击武器。",
				"require": "g.arms_tome>0&&g.tier2>0",
				"warn": true,
				"lock": [
					"t_martial_spec"
				],
				"cost": {
					"gold": 1000,
					"vigor": 10
				},
				"mod": {
					"slashdmg": 5,
					"player.speed": 2
				},
				"group": "martial"
			}
		],
		"tasks": [
			{
				"id": "martial_basics",
				"name": "基础对练",
				"require": "g.weaponlore>=1&&g.tier1>0",
				"need": "armssource",
				"desc": "与友方对手磨练武器使用。每次训练成本升高且耗时更久。",
				"max": 5,
				"length": 15,
				"cost": {
					"codices": "1+g.martial_basics",
					"research": "100+g.martial_basics*50",
					"gold": "250+g.martial_basics*20"
				},
				"run": {
					"stamina": 2,
					"research": 5
				},
				"mod": {
					"physdmg": 1,
					"weaponlore.max": 0.2,
					"weaponlore.rate": 0.2,
					"stamina.max": 0.2,
					"vigor.max": 0.2,
					"martial_basics.length": 5
				},
				"flavor": "帮助有限，但胜过稻草人。",
				"group": "martial"
			},
			{
				"id": "martial_defense",
				"name": "防守训练",
				"require": "g.weaponlore>=2&&g.martial_basics>0",
				"need": "armssource",
				"desc": "学习承受经验武器大师的重击。每次训练成本升高且耗时更久。",
				"max": 5,
				"length": 15,
				"cost": {
					"codices": "1+g.martial_defense*1",
					"research": "100+g.martial_defense*50",
					"gold": "500+g.martial_defense*10"
				},
				"run": {
					"stamina": 2,
					"research": 5
				},
				"mod": {
					"player.resist.blunt": 1,
					"player.resist.pierce": 1,
					"player.resist.slash": 1,
					"hp.max": 1,
					"martial_defense.length": 5
				},
				"flavor": "现在承受打击，避免将来更痛苦。",
				"group": "martial"
			},
			{
				"id": "arms_tome",
				"name": "兵器手册",
				"require": "g.weaponlore>=5&&g.tier1>0",
				"need": "armssource",
				"desc": "熟悉各种兵器。",
				"max": 1,
				"length": 150,
				"cost": {
					"codices": 3,
					"research": 300,
					"gold": 1800
				},
				"run": {
					"stamina": 2,
					"research": 7
				},
				"mod": {
					"weaponlore.max": 1.5,
					"weaponlore.rate": 0.5,
					"slashdmg": 1,
					"piercedmg": 1,
					"bluntdmg": 1
				},
				"flavor": "把技法记录在一本巨书中。",
				"group": "martial"
			},
			{
				"id": "legs_tome",
				"name": "腿法手册",
				"require": "g.arms_tome>0&&(g.martial_defense+g.martial_basics)>=10",
				"need": "legssource",
				"desc": "大量训练让你的双腿状态极佳。学会如何发挥它们的作用。",
				"max": 1,
				"length": 150,
				"cost": {
					"codices": 3,
					"research": 300,
					"gold": 1800
				},
				"run": {
					"stamina": 2,
					"research": 7
				},
				"mod": {
					"s_travel.max": 1,
					"s_travel.mod.dist": "0.5%",
					"dist": 50,
					"speed": 1
				},
				"flavor": "写作也是给双腿的休整时间，缓解疲劳。",
				"group": "martial"
			}
		],
		"potencies": [
			{
				"id": "sworddmg",
				"name": "剑类效能",
				"val": 100,
				"damage": "Math.max((i.value/100)||0,0)"
			},
			{
				"id": "hammerdmg",
				"name": "锤类效能",
				"val": 100,
				"damage": "Math.max((i.value/100)||0,0)"
			}
		],
		"tags": [
			{
				"id": "t_martial_spec",
				"name": "武技专精"
			}
		],
		"spells": [
			{
				"id": "blunt_simple",
				"name": "基础重击",
				"desc": "用你的训练对敌人进行重击。",
				"sortOrder": 373,
				"level": 2,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.weaponlore>=1",
				"buy": {
					"vigor": 4
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_blunt')",
				"needtext": "当前装备的武器必须为钝器",
				"cost": {
					"vigor": 3
				},
				"cd": 0.25,
				"result": {
					"weaponlore.exp": 0.3
				},
				"attack": {
					"kind": "blunt",
					"tohit": 1,
					"damage": "(a.getWeapon().damage||0)*0.9",
					"potencies": [
						"physdmg",
						"bluntdmg"
					]
				}
			},
			{
				"id": "pierce_simple",
				"name": "基础刺击",
				"desc": "用你的训练对敌人刺击。",
				"sortOrder": 358,
				"level": 2,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.weaponlore>=1",
				"buy": {
					"vigor": 4
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_pierce')",
				"needtext": "当前装备的武器必须为穿刺武器",
				"cost": {
					"vigor": 3
				},
				"cd": 0.25,
				"result": {
					"weaponlore.exp": 0.3
				},
				"attack": {
					"kind": "pierce",
					"tohit": 1,
					"damage": "(a.getWeapon().damage||0)*0.9",
					"potencies": [
						"physdmg",
						"piercedmg"
					]
				}
			},
			{
				"id": "slash_simple",
				"name": "基础斩击",
				"desc": "用你的训练对敌人进行斩击。",
				"sortOrder": 337,
				"level": 2,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.weaponlore>=1",
				"buy": {
					"vigor": 4
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_slash')",
				"needtext": "当前装备的武器必须为斩击武器",
				"cost": {
					"vigor": 3
				},
				"cd": 0.25,
				"result": {
					"weaponlore.exp": 0.3
				},
				"attack": {
					"kind": "slash",
					"tohit": 1,
					"damage": "(a.getWeapon().damage||0)*0.9",
					"potencies": [
						"physdmg",
						"slashdmg"
					]
				}
			},
			{
				"id": "defense_stance",
				"name": "防御姿态",
				"desc": "在短时间内提升你的防御。",
				"sortOrder": 391,
				"level": 3,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"buff"
					],
					"target": [
						"self"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"over time"
					]
				},
				"require": "g.weaponlore>=2",
				"buy": {
					"scrolls": 2,
					"vigor": 4
				},
				"cost": {
					"vigor": 3
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_martial')",
				"needtext": "当前装备的武器必须为武技武器",
				"result": {
					"weaponlore.exp": 0.3
				},
				"dot": {
					"name": "防御姿态",
					"duration": 10,
					"mod": {
						"self.defense": 10,
						"self.dodge": 1,
						"self.speed": -5
					}
				}
			},
			{
				"id": "mana_martial",
				"name": "注能攻击",
				"desc": "在攻击前为武器注入法力。",
				"flavor": "魔法与武器结合，造成魔法伤害。",
				"sortOrder": 317,
				"level": 3,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spellbook.value>0&&g.weaponlore>=3&&g.lore>=5",
				"buy": {
					"scrolls": 5,
					"vigor": 5
				},
				"caststoppers": [
					1,
					4
				],
				"need": "g.player.getWeapon().hasTag('t_martial')",
				"needtext": "Currently equipped weapon must be martial",
				"cost": {
					"vigor": 4,
					"mana": 3
				},
				"cd": 1,
				"result": {
					"weaponlore.exp": 0.5
				},
				"attack": {
					"kind": "mana",
					"tohit": 1,
					"damage": "3+(a.getWeapon().damage||0)*0.75",
					"potencies": [
						"physdmg",
						"manadmg"
					]
				}
			},
			{
				"id": "mana_double",
				"name": "充能连击",
				"desc": "为武器注能，然后连击两次。",
				"flavor": "先设局，再击倒对手。",
				"sortOrder": 316,
				"level": 4,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spellbook.value>0&&g.arms_tome>0",
				"caststoppers": [
					1,
					4
				],
				"buy": {
					"codices": 2,
					"vigor": 8,
					"managem": 1
				},
				"need": "g.player.getWeapon().hasTag('t_martial')",
				"needtext": "Currently equipped weapon must be martial",
				"cost": {
					"vigor": 6,
					"mana": 4
				},
				"cd": 5,
				"result": {
					"weaponlore.exp": 0.7
				},
				"attack": {
					"hits": [
						{
							"kind": "mana",
							"tohit": 1,
							"damage": "2+(a.getWeapon().damage||0)*0.65",
							"potencies": [
								"physdmg",
								"manadmg"
							]
						},
						{
							"kind": "mana",
							"tohit": 1,
							"damage": "1+(a.getWeapon().damage||0)*0.85",
							"potencies": [
								"physdmg",
								"manadmg"
							]
						}
					]
				}
			},
			{
				"id": "pommel_strike",
				"name": "柄击",
				"desc": "用武器的柄部击晕敌人。",
				"flavor": "造成9点伤害，抽一张牌。",
				"sortOrder": 372,
				"level": 4,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.weaponlore>=4",
				"buy": {
					"scrolls": 5,
					"vigor": 7
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_martial')",
				"needtext": "Currently equipped weapon must be martial",
				"cost": {
					"vigor": 5
				},
				"cd": 10,
				"result": {
					"weaponlore.exp": 0.4
				},
				"attack": {
					"kind": "blunt",
					"tohit": 1,
					"damage": "(a.getWeapon().damage||0)*0.8",
					"potencies": [
						"physdmg",
						"bluntdmg"
					],
					"dot": {
						"id": "paralyze",
						"duration": 1.2
					}
				}
			},
			{
				"id": "disarm_martial",
				"name": "缴械猛击",
				"desc": "将对手的武器击落或夺走。",
				"flavor": "嘿，你的剑哪去了？",
				"sortOrder": 336,
				"level": 5,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage",
						"debuff"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant",
						"over time"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.weaponlore>=3",
				"buy": {
					"scrolls": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_martial')",
				"needtext": "Currently equipped weapon must be martial",
				"cost": {
					"vigor": 4
				},
				"cd": 20,
				"result": {
					"weaponlore.exp": 0.4
				},
				"attack": {
					"kind": "slash",
					"tohit": -1,
					"damage": "(a.getWeapon().damage||0)*0.85",
					"potencies": [
						"physdmg",
						"slashdmg"
					],
					"dot": {
						"id": "tangled",
						"duration": 2
					}
				}
			},
			{
				"id": "pierce_bleed",
				"name": "刺伤",
				"desc": "瞄准要害器官以造成持久创伤。",
				"flavor": "盔甲上的洞通常不是好主意。",
				"sortOrder": 357,
				"level": 3,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant",
						"over time"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.weaponlore>=2",
				"buy": {
					"scrolls": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_martial')",
				"needtext": "Currently equipped weapon must be martial",
				"cost": {
					"vigor": 3
				},
				"cd": 2,
				"result": {
					"weaponlore.exp": 0.3
				},
				"attack": {
					"kind": "pierce",
					"tohit": 1,
					"damage": "((a.getWeapon().damage||0)*0.7)",
					"potencies": [
						"physdmg",
						"piercedmg"
					],
					"dot": {
						"name": "流血",
						"damage": "3~6",
						"duration": 10,
						"potencies": [
							"physdmg",
							"piercedmg"
						]
					}
				}
			},
			{
				"id": "pierce_thrust",
				"name": "精准刺击",
				"desc": "在刺击中加入力道。",
				"flavor": "不只是轻轻一戳。",
				"sortOrder": 356,
				"level": 4,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spec_pierce>0",
				"buy": {
					"codices": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_pierce')",
				"needtext": "Currently equipped weapon must be piercing",
				"cost": {
					"vigor": 4
				},
				"cd": 5,
				"result": {
					"weaponlore.exp": 0.4
				},
				"attack": {
					"kind": "pierce",
					"tohit": 1,
					"damage": "4+((a.getWeapon().damage||0)*1.2)",
					"potencies": [
						"physdmg",
						"piercedmg"
					]
				}
			},
			{
				"id": "pierce_armor",
				"name": "破甲",
				"desc": "在敌人的盔甲上留下孔洞。",
				"flavor": "盔甲上的洞有时是个好主意。",
				"sortOrder": 355,
				"level": 6,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage",
						"debuff"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant",
						"over time"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spec_pierce>0&&g.weaponlore>=6",
				"cd": 5,
				"buy": {
					"codices": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_pierce')",
				"needtext": "Currently equipped weapon must be piercing",
				"cost": {
					"vigor": 6
				},
				"result": {
					"weaponlore.exp": 0.6
				},
				"attack": {
					"kind": "pierce",
					"tohit": 1,
					"damage": "((a.getWeapon().damage||0)*1.0)",
					"potencies": [
						"physdmg",
						"piercedmg"
					],
					"dot": {
						"name": "pierced armor",
						"duration": 20,
						"mod": {
							"self.defense": -5
						}
					}
				}
			},
			{
				"id": "blunt_heavy",
				"name": "重击",
				"desc": "响彻的重击，造成巨量伤害。",
				"flavor": "早上肯定会留下瘀伤。",
				"sortOrder": 371,
				"level": 4,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spec_blunt>0",
				"buy": {
					"codices": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_blunt')",
				"needtext": "Currently equipped weapon must be blunt",
				"cost": {
					"vigor": 4
				},
				"cd": 5,
				"result": {
					"weaponlore.exp": 0.4
				},
				"attack": {
					"kind": "blunt",
					"tohit": 1,
					"damage": "((a.getWeapon().damage||0)*1.5)",
					"potencies": [
						"physdmg",
						"bluntdmg"
					]
				}
			},
			{
				"id": "blunt_crush",
				"name": "碾压打击",
				"desc": "一记旨在粉碎盔甲及其后方物体的挥击。",
				"flavor": "让本地铠匠有活干。",
				"sortOrder": 370,
				"level": 6,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage",
						"debuff"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant",
						"over time"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spec_blunt>0&&g.weaponlore>=6",
				"buy": {
					"codices": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_blunt')",
				"needtext": "Currently equipped weapon must be blunt",
				"cost": {
					"vigor": 6
				},
				"cd": 10,
				"result": {
					"weaponlore.exp": 0.6
				},
				"attack": {
					"kind": "blunt",
					"tohit": 1,
					"damage": "5+((a.getWeapon().damage||0)*0.7)",
					"potencies": [
						"physdmg",
						"bluntdmg"
					],
					"dot": {
						"duration": 10,
						"mod": {
							"self.tohit": -1,
							"self.defense": -5
						}
					}
				}
			},
			{
				"id": "slash_twohand",
				"name": "双手斩",
				"desc": "用你的力量发动强力斩击。",
				"flavor": "锋利的刀刃如黄油般切开。",
				"sortOrder": 335,
				"level": 4,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spec_slash>0",
				"buy": {
					"codices": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_slash')",
				"needtext": "Currently equipped weapon must be slashing",
				"cost": {
					"vigor": 4
				},
				"cd": 1,
				"result": {
					"weaponlore.exp": 0.4
				},
				"attack": {
					"kind": "slash",
					"tohit": 1,
					"damage": "2+((a.getWeapon().damage||0)*1.35)",
					"potencies": [
						"physdmg",
						"slashdmg"
					]
				}
			},
			{
				"id": "slash_weaken",
				"name": "削弱斩",
				"desc": "瞄准肌腱与关节以削弱敌人的攻击。",
				"flavor": "斩断他们的膝盖或肘部，或他们的任何要害。",
				"sortOrder": 334,
				"level": 6,
				"school": "martial",
				"tags": [
					"t_nospellcraft"
				],
				"keywords": {
					"type": [
						"damage",
						"debuff"
					],
					"target": [
						"enemy"
					],
					"targets": [
						"single"
					],
					"delivery": [
						"instant",
						"over time"
					],
					"special": [
						"weapon"
					]
				},
				"require": "g.spec_slash>0&&g.weaponlore>=6",
				"buy": {
					"codices": 5,
					"vigor": 5
				},
				"caststoppers": [
					1
				],
				"need": "g.player.getWeapon().hasTag('t_slash')",
				"needtext": "Currently equipped weapon must be slashing",
				"cost": {
					"vigor": 6
				},
				"cd": 5,
				"result": {
					"weaponlore.exp": 0.6
				},
				"attack": {
					"kind": "slash",
					"tohit": 1,
					"damage": "((a.getWeapon().damage||0)*1.0)",
					"potencies": [
						"physdmg",
						"slashdmg"
					],
					"dot": {
						"duration": 10,
						"mod": {
							"self.tohit": -1,
							"self.dodge": -5
						}
					}
				}
			}
		]
	}
}